{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"new-order-container\"\n};\nconst _hoisted_2 = {\n  class: \"top-bar\"\n};\nconst _hoisted_3 = {\n  class: \"customer-name\"\n};\nconst _hoisted_4 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = [\"onUpdate:modelValue\"];\nconst _hoisted_7 = {\n  class: \"total-section\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"PageHeader\"], {\n    title: \"Grocery Store Management System\"\n  }), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"New Order\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_cache[1] || (_cache[1] = _createElementVNode(\"label\", null, \"Customer Name:\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.customerName = $event),\n    type: \"text\",\n    placeholder: \"Enter customer name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.customerName]])])]), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Product\"), _createElementVNode(\"th\", null, \"Price\"), _createElementVNode(\"th\", null, \"Quantity\"), _createElementVNode(\"th\", null, \"Total\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.orderItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => item.product = $event,\n      onChange: $event => $setup.onProductChange(index)\n    }, [_cache[3] || (_cache[3] = _createElementVNode(\"option\", {\n      disabled: \"\",\n      value: \"\"\n    }, \"Select\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, p => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: p.product_id,\n        value: p.product_name\n      }, _toDisplayString(p.product_name), 9 /* TEXT, PROPS */, _hoisted_5);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_4), [[_vModelSelect, item.product]])]), _createElementVNode(\"td\", null, _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      \"onUpdate:modelValue\": $event => item.quantity = $event\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vModelText, item.quantity, void 0, {\n      number: true\n    }]])]), _createElementVNode(\"td\", null, _toDisplayString(item.price * item.quantity || 0), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", {\n    class: \"controls\"\n  }, [_createElementVNode(\"button\", {\n    class: \"add-btn\",\n    onClick: $setup.addProductRow\n  }, \"+ Add Product\")]), _createElementVNode(\"div\", _hoisted_7, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Total:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.totalTaka) + \" taka \", 1 /* TEXT */)]), _createElementVNode(\"div\", {\n    class: \"save-button\"\n  }, [_createElementVNode(\"button\", {\n    onClick: $setup.saveOrder\n  }, \"Save\")])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","$setup","title","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","customerName","$event","type","placeholder","_createElementBlock","_Fragment","_renderList","orderItems","item","index","key","product","onChange","onProductChange","disabled","value","products","p","product_id","product_name","_hoisted_5","_toDisplayString","price","quantity","number","onClick","addProductRow","_hoisted_7","totalTaka","saveOrder"],"sources":["/home/runner/work/Grocerry-Management-/Grocerry-Management-/Grocery Store Management System/src/views/OrderPage.vue"],"sourcesContent":["<template>\n   <PageHeader title=\"Grocery Store Management System\" />\n  <div class=\"new-order-container\">\n    <div class=\"top-bar\">\n      <h2>New Order</h2>\n      <div class=\"customer-name\">\n        <label>Customer Name:</label>\n        <input v-model=\"customerName\" type=\"text\" placeholder=\"Enter customer name\" />\n      </div>\n    </div>\n\n    <table>\n      <thead>\n        <tr>\n          <th>Product</th>\n          <th>Price</th>\n          <th>Quantity</th>\n          <th>Total</th>\n        </tr>\n      </thead>\n      <tbody>\n        \n        <tr v-for=\"(item, index) in orderItems\" :key=\"index\">\n          <td>\n                    <select v-model=\"item.product\" @change=\"onProductChange(index)\">\n          <option disabled value=\"\">Select</option>\n          <option v-for=\"p in products\" :key=\"p.product_id\" :value=\"p.product_name\">\n            {{ p.product_name }}\n          </option>\n        </select>\n\n          </td>\n          <td>{{ item.price}}</td>\n          <td><input type=\"number\" v-model.number=\"item.quantity\" /></td>\n          <td>{{ item.price * item.quantity || 0 }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div class=\"controls\">\n      <button class=\"add-btn\" @click=\"addProductRow\">+ Add Product</button>\n    </div>\n\n    <div class=\"total-section\">\n      <strong>Total:</strong> {{ totalTaka }} taka\n    </div>\n\n    <div class=\"save-button\">\n      <button @click=\"saveOrder\">Save</button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport PageHeader from '@/components/PageHeader.vue';\n\nconst customerName = ref('');\nconst products = ref([]);\nconst orderItems = ref([{ product: '', price: 0, quantity: 0 }]);\n\n\nconst fetchProducts = async () => {\n  try {\n    const response = await fetch('http://127.0.0.1:5000/products');\n    const data = await response.json();\n    products.value = data;\n  } catch (err) {\n    console.error('Error fetching products:', err);\n  }\n};\n\nconst totalTaka = computed(() =>\n  orderItems.value.reduce((acc, item) => acc + (item.price * item.quantity || 0), 0)\n);\n\n\nconst addProductRow = () => {\n  orderItems.value.push({ product: '', price: 0, quantity: 0 });\n};\n\n\nconst saveOrder = async () => {\n  const orderPayload = {\n    customer_name: customerName.value,\n    total: totalTaka.value,\n    datetime: new Date().toISOString().slice(0, 19).replace('T', ' '),\n  };\n\n  try {\n    const response = await fetch('http://127.0.0.1:5000/orders', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(orderPayload)\n    });\n\n    if (!response.ok) throw new Error('Failed to save order');\n    alert('Order saved successfully!');\n    setTimeout(() => {\n      window.location.href = '/';  // Redirect to home page\n    }, 500); // Delay redirect to ensure alert is seen\n\n    customerName.value = '';\n    orderItems.value = [{ product: null, price: 0, quantity: 0 }];\n  } catch (err) {\n    console.error('Error saving order:', err);\n    alert('Failed to save order.');\n  }\n};\n\nonMounted(fetchProducts);\n\nconst onProductChange = (index) => {\n  const selectedName = orderItems.value[index].product;\n  const product = products.value.find(p => p.product_name === selectedName);\n  if (product) {\n    orderItems.value[index].price = product.price_per_unit;\n  } else {\n    orderItems.value[index].price = 0;\n  }\n};\n\n</script>\n\n\n<style scoped>\n.new-order-container {\n  width: 75%;\n  margin: 40px auto;\n  background: #fff;\n  padding: 20px;\n  border-radius: 6px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  font-family: Arial, sans-serif;\n}\n\n.top-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.customer-name input {\n  padding: 6px;\n  width: 200px;\n  margin-left: 8px;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 10px;\n}\n\nth, td {\n  border: 1px solid #ddd;\n  padding: 8px;\n}\n\nselect, input[type=\"number\"] {\n  width: 100%;\n  padding: 6px;\n  box-sizing: border-box;\n}\n\n.controls {\n  text-align: left;\n  margin-bottom: 20px;\n}\n\n.add-btn {\n  background-color: #2196F3;\n  color: white;\n  padding: 6px 12px;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.add-btn:hover {\n  background-color: #1976d2;\n}\n\n.total-section {\n  text-align: right;\n  font-size: 16px;\n  margin-bottom: 20px;\n}\n\n.save-button {\n  text-align: right;\n}\n\nbutton {\n  background-color: #4CAF50;\n  color: white;\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\n.page-header {\n    width: 75%;\n    margin: 40px auto;\n    margin-bottom: 20px;\n}\n\n.page-header h1 {\n  margin: 0;\n  font-size: 24px;\n  font-weight: bold;\n  text-align: center;\n}\n\n.underline {\n  border: none;\n  border-top: 2px solid #ccc;\n  margin-top: 5px;\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAqB;;EACzBA,KAAK,EAAC;AAAS;;EAEbA,KAAK,EAAC;AAAe;;;;;EAsCvBA,KAAK,EAAC;AAAe;;6DA1C3BC,YAAA,CAAsDC,MAAA;IAA1CC,KAAK,EAAC;EAAiC,IACpDC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CJD,mBAAA,CAMM,OANNE,UAMM,G,0BALJF,mBAAA,CAAkB,YAAd,WAAS,qBACbA,mBAAA,CAGM,OAHNG,UAGM,G,0BAFJH,mBAAA,CAA6B,eAAtB,gBAAc,qB,gBACrBA,mBAAA,CAA8E;+DAA9DF,MAAA,CAAAM,YAAY,GAAAC,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAAtCT,MAAA,CAAAM,YAAY,E,OAIhCJ,mBAAA,CA0BQ,gB,0BAzBNA,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAgB,YAAZ,SAAO,GACXA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAiB,YAAb,UAAQ,GACZA,mBAAA,CAAc,YAAV,OAAK,E,uBAGbA,mBAAA,CAgBQ,iB,kBAdNQ,mBAAA,CAaKC,SAAA,QAAAC,WAAA,CAbuBZ,MAAA,CAAAa,UAAU,GAA1BC,IAAI,EAAEC,KAAK;yBAAvBL,mBAAA,CAaK;MAboCM,GAAG,EAAED;IAAK,IACjDb,mBAAA,CAQK,a,gBAPKA,mBAAA,CAKH;uCALoBY,IAAI,CAACG,OAAO,GAAAV,MAAA;MAAGW,QAAM,EAAAX,MAAA,IAAEP,MAAA,CAAAmB,eAAe,CAACJ,KAAK;kCACvEb,mBAAA,CAAyC;MAAjCkB,QAAQ,EAAR,EAAQ;MAACC,KAAK,EAAC;OAAG,QAAM,sB,kBAChCX,mBAAA,CAESC,SAAA,QAAAC,WAAA,CAFWZ,MAAA,CAAAsB,QAAQ,EAAbC,CAAC;2BAAhBb,mBAAA,CAES;QAFsBM,GAAG,EAAEO,CAAC,CAACC,UAAU;QAAGH,KAAK,EAAEE,CAAC,CAACE;0BACvDF,CAAC,CAACE,YAAY,wBAAAC,UAAA;mGAHQZ,IAAI,CAACG,OAAO,E,KAQvCf,mBAAA,CAAwB,YAAAyB,gBAAA,CAAjBb,IAAI,CAACc,KAAK,kBACjB1B,mBAAA,CAA+D,a,gBAA3DA,mBAAA,CAAsD;MAA/CM,IAAI,EAAC,QAAQ;uCAAiBM,IAAI,CAACe,QAAQ,GAAAtB;wDAAbO,IAAI,CAACe,QAAQ,E;MAArBC,MAAM,EAAd;IAA8B,E,MACvD5B,mBAAA,CAA8C,YAAAyB,gBAAA,CAAvCb,IAAI,CAACc,KAAK,GAAGd,IAAI,CAACe,QAAQ,sB;sCAKvC3B,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAU,IACnBI,mBAAA,CAAqE;IAA7DJ,KAAK,EAAC,SAAS;IAAEiC,OAAK,EAAE/B,MAAA,CAAAgC;KAAe,eAAa,E,GAG9D9B,mBAAA,CAEM,OAFN+B,UAEM,G,0BADJ/B,mBAAA,CAAuB,gBAAf,QAAM,qB,iBAAS,GAAC,GAAAyB,gBAAA,CAAG3B,MAAA,CAAAkC,SAAS,IAAG,QACzC,gB,GAEAhC,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAa,IACtBI,mBAAA,CAAwC;IAA/B6B,OAAK,EAAE/B,MAAA,CAAAmC;EAAS,GAAE,MAAI,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}