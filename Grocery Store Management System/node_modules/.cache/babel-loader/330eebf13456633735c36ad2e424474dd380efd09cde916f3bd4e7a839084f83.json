{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"spreadsheet-container\"\n};\nconst _hoisted_2 = {\n  class: \"header-controls\"\n};\nconst _hoisted_3 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_4 = {\n  class: \"table-default\"\n};\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"PageHeader\"], {\n    title: \"Grocery Store Management System\"\n  }), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h3\", null, \"Manage Products\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    class: \"button-link\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showModal = true)\n  }, _cache[2] || (_cache[2] = [_createElementVNode(\"h3\", null, \"Add New Product\", -1 /* CACHED */)]))]), $setup.showModal ? (_openBlock(), _createBlock($setup[\"AddNewProduct\"], {\n    key: 0,\n    onClose: _cache[1] || (_cache[1] = $event => $setup.showModal = false)\n  })) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"table\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Unit\"), _createElementVNode(\"th\", null, \"Price per Unit\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, product => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: product.products_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(product.product_name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(product.ucom_name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(product.price_per_unit) + \" Taka\", 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"button-link delete\",\n      onClick: $event => $setup.deleteProduct(product.product_id)\n    }, \" Delete \", 8 /* PROPS */, _hoisted_5)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","$setup","title","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","$event","showModal","_createBlock","onClose","_hoisted_4","_createElementBlock","_Fragment","_renderList","products","product","key","products_id","_toDisplayString","product_name","ucom_name","price_per_unit","deleteProduct","product_id","_hoisted_5"],"sources":["/home/runner/work/Grocerry-Management-/Grocerry-Management-/Grocery Store Management System/src/views/ManageProducts.vue"],"sourcesContent":["<template>\n  <PageHeader title=\"Grocery Store Management System\" />\n\n  <div class=\"spreadsheet-container\">\n    <div class=\"header-controls\">\n      <h3>Manage Products</h3>\n    <div class=\"action-buttons\">\n  <button class=\"button-link\" @click=\"showModal = true\">\n    <h3>Add New Product</h3>\n  </button>\n</div>\n\n<AddNewProduct v-if=\"showModal\" @close=\"showModal = false\" />\n\n\n    </div>\n\n    <table class=\"table-default\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Unit</th>\n          <th>Price per Unit</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.products_id\">\n          <td>{{ product.product_name }}</td>\n          <td>{{ product.ucom_name }}</td>\n          <td>{{ product.price_per_unit }} Taka</td>\n          <td> \n            <button class=\"button-link delete\" @click=\"deleteProduct(product.product_id)\">\n              Delete\n            </button> \n          </td>\n\n       \n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from 'vue';\nimport PageHeader from '@/components/PageHeader.vue';\nimport AddNewProduct from './AddNewProduct.vue';\n\nconst showModal = ref(false);\nconst products = ref([]);\n\n// Fetch function\nconst fetchProducts = async () => {\n  try {\n    const response = await fetch('http://127.0.0.1:5000/products');\n    const data = await response.json();\n    console.log('Fetched data:', data);\n    products.value = data;\n  } catch (error) {\n    console.error('Failed to load products:', error);\n  }\n};\n\n// Fetch initially\nonMounted(fetchProducts);\n\n// ðŸ‘‡ Watch for modal close to refetch products\nwatch(showModal, (newVal, oldVal) => {\n  if (oldVal === true && newVal === false) {\n    fetchProducts();\n  }\n});\n\nconst deleteProduct = async (id) => {\n  const confirmDelete = confirm(\"Are you sure you want to delete this product?\");\n  if (!confirmDelete) return;\n\n  try {\n    const response = await fetch(`http://127.0.0.1:5000/products/${id}`, {\n      method: 'DELETE',\n    });\n    const result = await response.json();\n    console.log(result);\n\n    if (result.status === 'success') {\n      products.value = products.value.filter(p => p.product_id !== id);\n      alert('Successfully deleted: ' + result.message);\n    } else {\n      alert('Failed to delete: ' + result.message);\n    }\n  } catch (error) {\n    console.error('Delete error:', error);\n    alert('An error occurred while deleting the product.');\n  }\n};\n</script>\n\n\n<style scoped>\n\n\n\n</style>\n"],"mappings":";;EAGOA,KAAK,EAAC;AAAuB;;EAC3BA,KAAK,EAAC;AAAiB;;EAEvBA,KAAK,EAAC;AAAgB;;EAWpBA,KAAK,EAAC;AAAe;;;6DAhB9BC,YAAA,CAAsDC,MAAA;IAA1CC,KAAK,EAAC;EAAiC,IAEnDC,mBAAA,CAsCM,OAtCNC,UAsCM,GArCJD,mBAAA,CAWM,OAXNE,UAWM,G,0BAVJF,mBAAA,CAAwB,YAApB,iBAAe,qBACrBA,mBAAA,CAIE,OAJFG,UAIE,GAHJH,mBAAA,CAES;IAFDJ,KAAK,EAAC,aAAa;IAAEQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAER,MAAA,CAAAS,SAAS;gCAC3CP,mBAAA,CAAwB,YAApB,iBAAe,mB,MAIFF,MAAA,CAAAS,SAAS,I,cAA9BC,YAAA,CAA6DV,MAAA;;IAA5BW,OAAK,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAER,MAAA,CAAAS,SAAS;6CAK7CP,mBAAA,CAuBQ,SAvBRU,UAuBQ,G,0BAtBNV,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAuB,YAAnB,gBAAc,GAClBA,mBAAA,CAAe,YAAX,QAAM,E,uBAGdA,mBAAA,CAaQ,iB,kBAZNW,mBAAA,CAWKC,SAAA,QAAAC,WAAA,CAXiBf,MAAA,CAAAgB,QAAQ,EAAnBC,OAAO;yBAAlBJ,mBAAA,CAWK;MAX4BK,GAAG,EAAED,OAAO,CAACE;QAC5CjB,mBAAA,CAAmC,YAAAkB,gBAAA,CAA5BH,OAAO,CAACI,YAAY,kBAC3BnB,mBAAA,CAAgC,YAAAkB,gBAAA,CAAzBH,OAAO,CAACK,SAAS,kBACxBpB,mBAAA,CAA0C,YAAAkB,gBAAA,CAAnCH,OAAO,CAACM,cAAc,IAAG,OAAK,iBACrCrB,mBAAA,CAIK,aAHHA,mBAAA,CAES;MAFDJ,KAAK,EAAC,oBAAoB;MAAEQ,OAAK,EAAAE,MAAA,IAAER,MAAA,CAAAwB,aAAa,CAACP,OAAO,CAACQ,UAAU;OAAG,UAE9E,iBAAAC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}