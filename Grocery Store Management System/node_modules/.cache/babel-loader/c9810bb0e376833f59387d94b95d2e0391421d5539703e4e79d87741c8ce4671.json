{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"spreadsheet-container\"\n};\nconst _hoisted_2 = {\n  class: \"header-controls\"\n};\nconst _hoisted_3 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_4 = {\n  class: \"table-default\"\n};\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"PageHeader\"], {\n    title: \"Grocery Store Management System\"\n  }), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h3\", null, \"Manage Products\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/manage-products\",\n    class: \"button-link\"\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createElementVNode(\"h3\", null, \"Add New Product\", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [0]\n  })])]), _createElementVNode(\"table\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Unit\"), _createElementVNode(\"th\", null, \"Price per Unit\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, product => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: product.products_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(product.product_name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(product.ucom_name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(product.price_per_unit) + \" Taka\", 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"button-link delete\",\n      onClick: $event => $setup.deleteProduct(product.products_id)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_5)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","$setup","title","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_component_router_link","to","_cache","_hoisted_4","_createElementBlock","_Fragment","_renderList","products","product","key","products_id","_toDisplayString","product_name","ucom_name","price_per_unit","onClick","$event","deleteProduct","_hoisted_5"],"sources":["C:\\Users\\mdobn\\Downloads\\Grocery management\\ui\\src\\views\\ManageProducts.vue"],"sourcesContent":["<template>\r\n  <PageHeader title=\"Grocery Store Management System\" />\r\n\r\n  <div class=\"spreadsheet-container\">\r\n    <div class=\"header-controls\">\r\n      <h3>Manage Products</h3>\r\n      <div class=\"action-buttons\">\r\n        <router-link to=\"/manage-products\" class=\"button-link\">\r\n          <h3>Add New Product</h3>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <table class=\"table-default\">\r\n      <thead>\r\n        <tr>\r\n          <th>Name</th>\r\n          <th>Unit</th>\r\n          <th>Price per Unit</th>\r\n          <th>Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"product in products\" :key=\"product.products_id\">\r\n          <td>{{ product.product_name }}</td>\r\n          <td>{{ product.ucom_name }}</td>\r\n          <td>{{ product.price_per_unit }} Taka</td>\r\n          <td> \r\n           <button class=\"button-link delete\" @click=\"deleteProduct(product.products_id)\">Delete</button> \r\n          </td>\r\n\r\n       \r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport PageHeader from '@/components/PageHeader.vue';\r\n\r\nconst products = ref([]);\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const response = await fetch('http://127.0.0.1:5000/products');\r\n    const data = await response.json();\r\n    console.log('Fetched data:', data);  // <== ADD THIS\r\n    products.value = data;\r\n  } catch (error) {\r\n    console.error('Failed to load products:', error);\r\n  }\r\n});\r\n\r\nconst deleteProduct = async (id) => {\r\n  const confirmDelete = confirm(\"Are you sure you want to delete this product?\");\r\n  if (!confirmDelete) return;\r\n\r\n  try {\r\n    const response = await fetch(`http://127.0.0.1:5000/products/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n    const result = await response.json();\r\n    console.log(result);\r\n\r\n    if (result.status === 'success') {\r\n      // Remove the deleted product from the list\r\n      products.value = products.value.filter(p => p.products_id !== id);\r\n    } else {\r\n      alert('Failed to delete: ' + result.message);\r\n    }\r\n  } catch (error) {\r\n    console.error('Delete error:', error);\r\n    alert('An error occurred while deleting the product.');\r\n  }\r\n};\r\nonMounted(fetchProducts);\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n\r\n\r\n</style>\r\n"],"mappings":";;EAGOA,KAAK,EAAC;AAAuB;;EAC3BA,KAAK,EAAC;AAAiB;;EAErBA,KAAK,EAAC;AAAgB;;EAOtBA,KAAK,EAAC;AAAe;;;;6DAZ9BC,YAAA,CAAsDC,MAAA;IAA1CC,KAAK,EAAC;EAAiC,IAEnDC,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJD,mBAAA,CAOM,OAPNE,UAOM,G,0BANJF,mBAAA,CAAwB,YAApB,iBAAe,qBACnBA,mBAAA,CAIM,OAJNG,UAIM,GAHJN,YAAA,CAEcO,sBAAA;IAFDC,EAAE,EAAC,kBAAkB;IAACT,KAAK,EAAC;;sBACvC,MAAwBU,MAAA,QAAAA,MAAA,OAAxBN,mBAAA,CAAwB,YAApB,iBAAe,mB;;;UAKzBA,mBAAA,CAqBQ,SArBRO,UAqBQ,G,0BApBNP,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAuB,YAAnB,gBAAc,GAClBA,mBAAA,CAAe,YAAX,QAAM,E,uBAGdA,mBAAA,CAWQ,iB,kBAVNQ,mBAAA,CASKC,SAAA,QAAAC,WAAA,CATiBZ,MAAA,CAAAa,QAAQ,EAAnBC,OAAO;yBAAlBJ,mBAAA,CASK;MAT4BK,GAAG,EAAED,OAAO,CAACE;QAC5Cd,mBAAA,CAAmC,YAAAe,gBAAA,CAA5BH,OAAO,CAACI,YAAY,kBAC3BhB,mBAAA,CAAgC,YAAAe,gBAAA,CAAzBH,OAAO,CAACK,SAAS,kBACxBjB,mBAAA,CAA0C,YAAAe,gBAAA,CAAnCH,OAAO,CAACM,cAAc,IAAG,OAAK,iBACrClB,mBAAA,CAEK,aADJA,mBAAA,CAA8F;MAAtFJ,KAAK,EAAC,oBAAoB;MAAEuB,OAAK,EAAAC,MAAA,IAAEtB,MAAA,CAAAuB,aAAa,CAACT,OAAO,CAACE,WAAW;OAAG,QAAM,iBAAAQ,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}